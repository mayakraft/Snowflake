<html>
<head>
	<meta charset="UTF-8">
	<script language="javascript" type="text/javascript" src="../p5.min.js"></script>
	<script language="javascript" type="text/javascript" src="binarytree.js"></script>
	<style> body {padding: 0; margin: 0;} </style>
</head>
<body>
	<script>

var a;

function buildTree(tree){
	if(tree.generation > 8)
		return;

	if(random(0, 1) > 0.25){
		var l = tree.addLeftChild();
		buildTree(l);
	}
	if(random(0, 1) > 0.25){
		var r = tree.addRightChild();
		buildTree(r);
	}
}

function setup() {
	createCanvas(windowWidth, windowHeight);
	fill(0);
	a = new BinaryTree();
	buildTree(a);
	logTree(a);
}

function mousePressed() {
	a = new BinaryTree();
	buildTree(a);
	logTree(a);
}

function draw() {
	clear(255);
	var pos = {'x':windowWidth*.5, 'y':10};

	drawTree(a, pos);

	function drawTree(tree, position){
		fill(0);
		if(tree.leaf){
			stroke(0, 200, 0)
			fill(50, 255, 50);
		}
		ellipse(position.x, position.y, 6, 6);

		stroke(0);
		if(tree.left != undefined){
			var newPosition = {'x':position.x-(windowWidth*.45)/Math.pow(2,tree.left.generation), 'y':position.y + 30};
			line(position.x, position.y, newPosition.x, newPosition.y);
			drawTree(tree.left, newPosition);
		}
		if(tree.right != undefined){
			var newPosition = {'x':position.x+(windowWidth*.45)/Math.pow(2,tree.right.generation), 'y':position.y + 30};
			line(position.x, position.y, newPosition.x, newPosition.y);
			drawTree(tree.right, newPosition);
		}
	}
}

	</script>
</body>
</html>