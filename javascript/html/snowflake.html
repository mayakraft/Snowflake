<html>
<head>
	<meta charset="UTF-8">
	<script language="javascript" type="text/javascript" src="../lib/p5.min.js"></script>
	<script language="javascript" type="text/javascript" src="../lib/p5.dom.min.js"></script>
	<script language="javascript" type="text/javascript" src="../math/algorithms.js"></script>
	<script language="javascript" type="text/javascript" src="../math/binarytree.js"></script>
	<script language="javascript" type="text/javascript" src="../atmosphere.js"></script>
	<script language="javascript" type="text/javascript" src="../snowflake.js"></script>
	<script language="javascript" type="text/javascript" src="../graphics/render.js"></script>
	<script language="javascript" type="text/javascript" src="../graphics/renderTree.js"></script>
	<script language="javascript" type="text/javascript" src="../lib/jquery-3.1.1.min.js"></script>
	<style> 
	body {
		padding: 0; 
		margin: 0;
	}
	h1, h2, h3, h4{
		margin:5px;
		padding:0px;
	}
	.floating{
		background-color: white;
		width: 140px;
		height: 500px;
		top: 0px;
		left: 40px;
		z-index: 2;
		padding: 10px;
		text-align: center;
	}
	.slider-width75{
		width: 75;
	}
	</style>
</head>
<body>	
	<div class="floating">
		<form>
			<div style="padding:15px;">
				<input type="button" value="New Snowflake" onclick="newSnowflake()"><br>
			</div>
			<h2>rendering</h2>
			<div style="text-align:left;">
				<h3>snowflake:</h3>
				<input type="radio" name="flakeshape" value="0" onchange="radioHandler()">binary tree<br>
				<input type="radio" name="flakeshape" value="1" onchange="radioHandler()">one arm<br>
				<input type="radio" name="flakeshape" value="2" checked onchange="radioHandler()">snowflake<br>
			</div>
			<br>
			<div style="text-align:left;">
				<h3>distribution:</h3>
				<input type="radio" name="growthshape" value="0" onchange="radioHandler()">linear<br>
				<input type="radio" name="growthshape" value="1" onchange="radioHandler()">logarithmic<br>
				<input type="radio" name="growthshape" value="2" checked onchange="radioHandler()">realistic<br>
			</div>
			<br>
			<div style="text-align:left;">
				<h3>shape:</h3>
				<input type="radio" name="nodeshape" value="0" onchange="radioHandler()">lines<br>
				<input type="radio" name="nodeshape" value="1" onchange="radioHandler()">rect<br>
				<input type="radio" name="nodeshape" value="2" checked onchange="radioHandler()">hex1
				<input type="radio" name="nodeshape" value="3" checked onchange="radioHandler()">hex2<br>
			</div>
			<br>
			<h2>growth</h2>
			<input type="checkbox" name="wireframeCheckbox" value="yesuse" onclick="checkHandler(this)"> wireframe<br>
			<input type="range" class="slider-width75" onchange="sliderHandler(this.value)"><br>
		</form>
	</div>
	<script>


var snowflake;

var snowflakePosition;

var drawStyle = 2;
var nodeStyle = 2;
var growStyle = 2;

var atmos;

var atmosphere_iterations = 5;

function setup() {
	var divs = selectAll('.floating');
	console.log('Number: ' + divs.length);
	for (var i=0; i<divs.length; i++) {
		var div = divs[i];
		div.position(50, 50);
	}
	// console.log(myDiv);

	canvas = createCanvas(windowWidth, windowHeight);
	resizeOrigins();
	frameRate(10);
	// make atmosphere
	atmos = new Atmosphere( atmosphere_iterations );
	console.log(atmos);

	snowflake = new Snowflake();
	snowflake.grow(atmos);
	logTree(snowflake.tree);

	noLoop();
}

function radioHandler(){
	drawStyle = $('input[name="flakeshape"]:checked').val();
	snowflake.setDrawStyle(drawStyle);
	nodeStyle = $('input[name="nodeshape"]:checked').val();
	snowflake.setNodeStyle(nodeStyle);
	growStyle = $('input[name="growthshape"]:checked').val();
	setGrowStyle(growStyle);
	draw();
}

function checkHandler(input){
	draw();
}

function sliderHandler(input){
	console.log(input);
}

function newSnowflake(){
	atmos = new Atmosphere( atmosphere_iterations );
	console.log(atmos);
	snowflake = new Snowflake();
	snowflake.grow(atmos);
	snowflake.setDrawStyle(drawStyle);
	draw();	
}

function mousePressed() {
	// var atmos = new Atmosphere(8);
	// console.log(atmos);
	// snowflake = new Snowflake();
	// snowflake.grow(atmos);
	// draw();
}

function draw() {
	background(128);
	stroke(0);
	fill(255);
	// var treePosition = {'x':windowWidth*.5, 'y':windowHeight*.5};
	// drawRightBranchingBinaryTree(snowflake.tree, treePosition);
	// noStroke();
	snowflake.draw(snowflakePosition);
	drawRightBranchingBinaryTree(snowflake.tree, {'x':windowWidth*0.5 + 100 - 100, 'y':windowHeight-20});
	atmos.drawAtmosphereGraph({'x':windowWidth*0.5 + 100 - 100, 'y':10, 'width':200, 'height':40});
}

function resizeOrigins(){
	// if(windowWidth > windowHeight)
	// 	snowflakePosition = {x:windowWidth*.5, y:windowHeight*.5};
	// else
		snowflakePosition = {x:windowWidth*.5 + 100, y:windowHeight*.5};
}

function windowResized() {
	resizeCanvas(windowWidth, windowHeight);
	resizeOrigins();
}

	</script>
</body>
</html>