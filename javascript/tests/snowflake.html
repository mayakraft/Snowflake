<html>
<head>
	<meta charset="UTF-8">
	<script language="javascript" type="text/javascript" src="../bin/p5.min.js"></script>
	<script language="javascript" type="text/javascript" src="../algorithms.js"></script>
	<script language="javascript" type="text/javascript" src="../atmosphere.js"></script>
	<script language="javascript" type="text/javascript" src="../binarytree.js"></script>
	<script language="javascript" type="text/javascript" src="../snowflake.js"></script>
	<script language="javascript" type="text/javascript" src="../render.js"></script>
	<style> body {padding: 0; margin: 0;} </style>
</head>
<body>
	<script>

var snowflake;

var snowflakePosition;

function setup() {
	canvas = createCanvas(windowWidth, windowHeight);
	resizeOrigins();
	frameRate(10);
	// make atmosphere
	var atmos = new Atmosphere(8);
	console.log(atmos);

	snowflake = new Snowflake();
	snowflake.grow(atmos);
	logTree(snowflake.tree);

	noLoop();
}

function mousePressed() {
	var atmos = new Atmosphere(8);
	console.log(atmos);
	snowflake = new Snowflake();
	snowflake.grow(atmos);
	draw();
}

function draw() {
	background(128);
	stroke(0);
	fill(255, 80);
	var treePosition = {'x':windowWidth*.5, 'y':windowHeight*.5};
	drawRightBranchingBinaryTree(snowflake.tree, treePosition);
	noStroke();
	snowflake.draw(snowflakePosition);
}

function resizeOrigins(){
	if(windowWidth > windowHeight)
		snowflakePosition = {x:windowWidth*.5, y:windowHeight*.5};
	else
		snowflakePosition = {x:windowWidth*.5, y:windowHeight*.5};
}

function windowResized() {
	resizeCanvas(windowWidth, windowHeight);
	resizeOrigins();
}

	</script>
</body>
</html>